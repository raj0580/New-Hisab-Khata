<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>আমার ব্যবসার হিসাব</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2196F3"> <!-- New Blue Theme Color -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="auth-container" class="container">
        <h2>লগইন করুন</h2>
        <input type="email" id="email" placeholder="ইমেইল">
        <input type="password" id="password" placeholder="পাসওয়ার্ড">
        <button id="login-btn">লগইন</button>
        <p>অ্যাকাউন্ট নেই? <a href="#" id="signup-link">সাইন আপ করুন</a></p>
    </div>

    <div id="app-container" style="display: none;">
        <div id="setup-screen" class="container" style="display: none;">
             <h2>প্রাথমিক ব্যালেন্স সেটআপ</h2>
            <input type="number" id="initial-online-balance" placeholder="অনলাইন ব্যালেন্স">
            <input type="number" id="initial-cash-balance" placeholder="ক্যাশ ব্যালেন্স">
            <button id="save-initial-balance">সেভ করুন</button>
        </div>

        <div id="main-app" class="container" style="display: none;">
            <header class="main-header">
                <h1>আমার ব্যবসার হিসাব</h1>
                <button id="logout-btn">লগআউট</button>
            </header>

            <h2 class="section-title">ড্যাশবোর্ড</h2>
            <div id="dashboard">
                <div class="card"><h3 class="card-title">বর্তমান অনলাইন</h3><p id="online-balance">৳ 0.00</p></div>
                <div class="card"><h3 class="card-title">বর্তমান ক্যাশ</h3><p id="cash-balance">৳ 0.00</p></div>
                <div class="card"><h3 class="card-title">আজকের আয়</h3><p id="today-income">৳ 0.00</p></div>
                <div class="card"><h3 class="card-title">আজকের ব্যয়</h3><p id="today-expense">৳ 0.00</p></div>
            </div>
            
            <div class="card total-balance-card">
                <h3 class="card-title">মোট বর্তমান ব্যালেন্স</h3>
                <p id="total-balance">৳ 0.00</p>
            </div>

            <!-- *** FIX: এই অংশটি আগে অনুপস্থিত ছিল *** -->
            <div id="date-filter">
                <label for="date-picker">দিন দেখুন:</label>
                <input type="date" id="date-picker">
            </div>
            
            <h2 class="section-title">নতুন লেনদেন যোগ করুন</h2>
            <form id="transaction-form">
                <select id="category">
                    <option value="online-income">অনলাইন আয়</option><option value="cash-income">ক্যাশ আয়</option>
                    <option value="online-expense">অনলাইন খরচ</option><option value="cash-expense">ক্যাশ খরচ</option>
                    <option value="due">ডিউ (বকেয়া)</option>
                </select>
                <input type="number" id="amount" placeholder="পরিমাণ (৳)">
                <input type="text" id="description" placeholder="বর্ণনা / আইটেম">
                <input type="text" id="customer-name" placeholder="কাস্টমারের নাম (ডিউ হলে)" style="display: none;">
                <button type="button" id="add-transaction-btn">যোগ করুন</button>
            </form>

            <div class="tabs">
                <button class="tab-link active" onclick="openTab(event, 'all-transactions')">সকল লেনদেন</button>
                <button class="tab-link" onclick="openTab(event, 'due-transactions')">ডিউ তালিকা</button>
            </div>
            <div id="all-transactions" class="tab-content active"><ul id="transactions-list-ul"></ul></div>
            <div id="due-transactions" class="tab-content"><ul id="due-list-ul"></ul></div>
        </div>
    </div>
    
    <div id="due-details-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header"><h2 id="modal-customer-name"></h2><span class="close-btn">&times;</span></div>
            <div id="modal-body">
                <p><strong>মোট বকেয়া:</strong> <span id="modal-remaining-due"></span></p>
                <h3>পেমেন্ট ইতিহাস</h3><ul id="modal-payment-history"></ul>
                <h3>নতুন পেমেন্ট যোগ করুন</h3>
                <input type="number" id="new-payment-amount" placeholder="পেমেন্টের পরিমাণ">
                <button id="add-payment-btn">পেমেন্ট যোগ করুন</button>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
    <script>
        function openTab(evt, tabName) {
            document.querySelectorAll(".tab-content").forEach(tab => tab.style.display = "none");
            document.querySelectorAll(".tab-link").forEach(link => link.classList.remove("active"));
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.classList.add("active");
        }
    </script>
</body>
</html>
